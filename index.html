<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Consulta de Materias y Horarios</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <link rel="icon" href="WhatsApp_Image_2024-11-28_at_5.36.45_PM-removebg-preview.png" type="image/x-icon">
  <style>
    /* Estilos para el horario */
    .schedule-container {
      margin-top: 20px;
    }

    .schedule {
      display: grid;
      grid-template-columns: 80px repeat(5, 1fr);
      gap: 1px;
      background-color: #ddd;
    }

    .schedule-cell {
      background-color: white;
      padding: 8px;
      min-height: 50px;
      border: 1px solid #dee2e6;
    }

    .schedule-header {
      font-weight: bold;
      text-align: center;
      background-color: #f0f0f0;
    }

    .course-block {
      background-color: #e3f2fd;
      margin: 2px;
      padding: 5px;
      border-radius: 3px;
      font-size: 12px;
      cursor: move;
    }

    .conflict {
      background-color: #ffcdd2 !important;
    }

    .schedule-controls {
      margin-bottom: 15px;
    }
  </style>
</head>

<body>

  <header class="bg-success text-white text-center py-4">
    <section>
      <img src="Logo.png" alt="Logo de la página" class="logo">
    </section>
    <h1>Consulta de Materias y Horarios</h1>
    <p>Selecciona tu carrera, las materias aprobadas y organiza tu horario semanal.</p>
  </header>

  <main class="container my-4">
    <!-- Selector de carrera -->
    <section id="seleccion-carrera" class="mb-4">
      <h2>Selecciona tu carrera</h2>
      <select id="carrera-select" class="form-select">
        <option value="" disabled selected>Elige tu carrera</option>
        <option value="mecanica">Ingeniería Mecánica</option>
        <option value="electromecanica">Ingeniería Electromecánica</option>
        <option value="mecatronica">Ingeniería Mecatrónica</option>
      </select>
    </section>

    <!-- Materias aprobadas y disponibles -->
    <section id="materias-aprobadas" style="display: none;">
      <h2>Materias Aprobadas</h2>
      <div class="accordion" id="accordionSemestres">
        <!-- Los semestres se generarán dinámicamente -->
      </div>
      <button id="check-available" class="btn btn-primary mt-3">Ver Materias Disponibles</button>
    </section>

    <section id="materias-disponibles" style="display: none;" class="mt-4">
      <h2>Materias Disponibles</h2>
      <ul id="available-list" class="list-group"></ul>
    </section>

    <!-- Sección de Horario -->
    <section id="horario-section" class="mt-5" style="display: none;">
      <h2>Organizador de Horario</h2>
      <div class="alert alert-info">
        Registra las materias disponibles a tu horario semanal y verifica que no haya choques.
      </div>

      <div class="schedule-controls">
        <button id="add-course" class="btn btn-success btn-sm">
          <i class="bi bi-plus-circle"></i> Añadir Materia Manualmente
        </button>
        <button id="check-conflicts" class="btn btn-warning btn-sm ms-2">
          <i class="bi bi-exclamation-triangle"></i> Verificar Choques
        </button>
        <button id="clear-schedule" class="btn btn-danger btn-sm ms-2">
          <i class="bi bi-trash"></i> Limpiar Horario
        </button>
      </div>

      <div class="schedule-container">
        <div class="schedule" id="schedule">
          <!-- Horario se generará aquí -->
        </div>
      </div>
    </section>

    <!-- Sección de Consejos Útiles -->
    <section id="consejos-utiles" class="mt-5">
      <h2 class="text-center">Consejos Útiles</h2>
      <div class="card-deck">
        <div class="card mb-3">
          <div class="card-body">
            <h5 class="card-title"><i class="bi bi-journal-check"></i> Tip 0</h5>
            <p class="card-text">Puedes tomar las materias <strong>Humanística I, II, III</strong> e <strong>Ingeniería
                de Mantenimiento</strong> cuando lo creas necesario. Los créditos son solo una formalidad, ¡planifica a
              tu ritmo!</p>
          </div>
        </div>
        <div class="card-deck">
          <div class="card mb-3">
            <div class="card-body">
              <h5 class="card-title"><i class="bi bi-lightbulb"></i> Tip 1</h5>
              <p class="card-text">Asegúrate de revisar las correlativas antes de planificar tu ciclo.</p>
            </div>
          </div>
          <div class="card mb-3">
            <div class="card-body">
              <h5 class="card-title"><i class="bi bi-calendar"></i> Tip 2</h5>
              <p class="card-text">Revisa los horarios de materias para evitar choques al momento de inscribirte y
                recuerda que hay materias que puedes condicionar</p>
            </div>
          </div>
          <div class="card mb-3">
            <div class="card-body">
              <h5 class="card-title"><i class="bi bi-emoji-smile"></i> Tip 3</h5>
              <p class="card-text">Consulta con estudiantes avanzados para obtener recomendaciones sobre docentes.</p>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="bg-dark text-center py-3">
    <p class="text-white">Desarrollado para estudiantes con ❤️</p>
   
    <p class="text-white">&copy; 2024 /mone. Todos los derechos reservados.</p>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Generar el horario
    document.addEventListener('DOMContentLoaded', function () {
      const schedule = document.getElementById('schedule');
      const days = ['Hora', 'Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sabado'];
      const hours = ['7:00', '8:00', '9:00', '10:00', '11:00', '12:00', '13:00', '14:00', '15:00', '16:00', '17:00', '18:00', '19:00', '20:00'];

      // Crear encabezados de días
      days.forEach(day => {
        const cell = document.createElement('div');
        cell.className = 'schedule-cell schedule-header';
        cell.textContent = day;
        schedule.appendChild(cell);
      });

      // Crear celdas de horas
      hours.forEach(hour => {
        // Celda de hora
        const timeCell = document.createElement('div');
        timeCell.className = 'schedule-cell schedule-header';
        timeCell.textContent = hour;
        schedule.appendChild(timeCell);

        // Celdas para cada día
        for (let i = 1; i < days.length; i++) {
          const cell = document.createElement('div');
          cell.className = 'schedule-cell';
          cell.dataset.time = hour;
          cell.dataset.day = days[i];
          schedule.appendChild(cell);
        }
      });

      // Mostrar sección de horario cuando haya materias disponibles
      document.getElementById('check-available').addEventListener('click', function () {
        document.getElementById('horario-section').style.display = 'block';
      });

      // Funcionalidad para agregar cursos manualmente
      document.getElementById('add-course').addEventListener('click', () => {
        const courseName = prompt("Nombre de la materia:");
        if (courseName) {
          const courseDays = prompt("Días (ej. Lunes,Martes):").split(',');
          const courseTime = prompt("Hora de inicio (ej. 8:00):");
          const duration = parseInt(prompt("Duración (en horas):", "2")) || 2;

          const course = {
            name: courseName,
            days: courseDays.map(day => day.trim()),
            time: courseTime,
            duration: duration
          };

          placeCourseOnSchedule(course);
        }
      });

      function placeCourseOnSchedule(course) {
        course.days.forEach(day => {
          const timeIndex = hours.indexOf(course.time);
          if (timeIndex !== -1) {
            for (let i = 0; i < course.duration; i++) {
              const currentHour = hours[timeIndex + i];
              const cell = document.querySelector(`.schedule-cell[data-day="${day}"][data-time="${currentHour}"]`);
              if (cell) {
                const courseDiv = document.createElement('div');
                courseDiv.className = 'course-block';
                courseDiv.textContent = course.name;
                courseDiv.dataset.course = course.name;
                cell.appendChild(courseDiv);
              }
            }
          }
        });
      }

      // Verificar choques de horario
      document.getElementById('check-conflicts').addEventListener('click', () => {
        // Limpiar conflictos anteriores
        document.querySelectorAll('.conflict').forEach(el => {
          el.classList.remove('conflict');
        });

        let hasConflicts = false;
        const allCells = document.querySelectorAll('.schedule-cell:not(.schedule-header)');

        allCells.forEach(cell => {
          if (cell.children.length > 1) {
            hasConflicts = true;
            cell.classList.add('conflict');
            Array.from(cell.children).forEach(child => {
              child.classList.add('conflict');
            });
          }
        });

        if (hasConflicts) {
          alert("¡Hay choques en tu horario! Las celdas en rojo indican conflictos.");
        } else {
          alert("No hay choques en tu horario. ¡Todo está bien!");
        }
      });

      // Limpiar horario
      document.getElementById('clear-schedule').addEventListener('click', () => {
        if (confirm("¿Estás seguro de que quieres limpiar todo el horario?")) {
          document.querySelectorAll('.schedule-cell:not(.schedule-header)').forEach(cell => {
            cell.innerHTML = '';
          });
        }
      });

      // Hacer las materias disponibles arrastrables
      document.getElementById('available-list').addEventListener('dragstart', function (e) {
        if (e.target.classList.contains('list-group-item')) {
          e.dataTransfer.setData('text/plain', e.target.textContent);
        }
      });

      // Permitir soltar materias en el horario
      document.querySelectorAll('.schedule-cell').forEach(cell => {
        cell.addEventListener('dragover', function (e) {
          e.preventDefault();
        });

        cell.addEventListener('drop', function (e) {
          e.preventDefault();
          const courseName = e.dataTransfer.getData('text/plain');
          if (courseName) {
            const courseDiv = document.createElement('div');
            courseDiv.className = 'course-block';
            courseDiv.textContent = courseName;
            courseDiv.draggable = true;
            this.appendChild(courseDiv);
          }
        });
      });
    });
  </script>
  <script src="script.js"></script>
</body>

</html>